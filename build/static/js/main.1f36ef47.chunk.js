(this["webpackJsonpintuit-demo"]=this["webpackJsonpintuit-demo"]||[]).push([[0],{105:function(n,t,e){},106:function(n,t,e){},107:function(n,t,e){"use strict";e.r(t);var c=e(1),o=e.n(c),i=e(40),r=e.n(i),s=(e(48),e(49),e(9)),a=function(n){return Object(c.useReducer)(function(n){return function(t,e){var c=n.states[t];if(void 0===c)throw new Error("No transitions defined for ".concat(t));var o=c[e];if(void 0===o)throw new Error("Unknown transition for event ".concat(e," in state ").concat(t));return o}}(n),n.initialState)},u=(e(50),e(51),e(0));var d=function(n){var t=Object(c.useState)(""),e=Object(s.a)(t,2),o=e[0],i=e[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),d=a[0],l=a[1];return Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),!function(n){var t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!n.match(t)&&n.match(t)[1]}(o)?l("please insert a valid youtube video url"):(n.onNewSong(o),i(""))},className:"add-song-container",children:[Object(u.jsx)("input",{"data-testid":"song-url",className:"add-song-input",type:"text",placeholder:"Enter video id",value:o,onChange:function(n){l(""),i(n.target.value)}}),Object(u.jsx)("div",{className:"spacer"}),Object(u.jsx)("button",{className:"add-song-button","data-testid":"add-song",type:"submit",children:"Add Song"})]}),d.length>0&&Object(u.jsx)("div",{className:"error",children:d})]})},l=e(43),j=e(41),f=e.n(j),b=o.a.createContext(),O=function(n){var t=n.children,e=f()("http://localhost:4000",{transports:["websocket","polling"],reconnection:!1,autoConnect:!1});return Object(u.jsx)(b.Provider,{value:e,children:t})},g="newSongEvent",v="historyPlaylistEvent",h="updatePlaylistEvent",m=function(){var n=Object(c.useState)([]),t=Object(s.a)(n,2),e=t[0],o=t[1],i=Object(c.useContext)(b);Object(c.useEffect)((function(){e.length||i.emit("getHistoryEvent");var n=function(n){o((function(t){return[].concat(Object(l.a)(t),[n])}))},t=function(n){o((function(){return n}))};return i.on(g,n),i.on(v,t),i.on(h,t),function(){i.off(g,n),i.off(v,t),i.off(h,t),i.disconnect()}}),[]);return{playlist:e,addSong:function(n){i.emit(g,n)},updatePlaylist:function(n){i.emit(h,n)},getCurrent:function(){return e[0]||""}}};e(83);function N(n){var t=n.song;return Object(u.jsxs)("div",{className:"song-container",children:[Object(u.jsx)("div",{"data-testid":"song-item",className:"song-item",children:t.url}),Object(u.jsx)("button",{className:"btn ",onClick:function(){n.onRemove(t)},children:"X"})]})}var x=function(n){var t=n.playlist,e=function(t){n.onRemove(t)},c=t.map((function(n,t){return Object(u.jsx)(N,{onRemove:e,song:n},t)}));return Object(u.jsx)("div",{"data-testid":"song-list",className:"song-list",children:c})},C=e(42),p=e.n(C);e(105);var y=function(n){var t=n.song;return Object(u.jsx)("div",{style:{height:"100%"},children:t.url?Object(u.jsx)(p.a,{url:t.url,width:"100%",height:"100%",controls:!1,playing:!0,muted:!1,onEnded:function(){n.onSongEnded(t)}}):Object(u.jsx)("div",{className:"empty-playlist",children:" Please add some songs to playlist"})})},w=function(n){var t=m(),e=t.playlist,c=t.addSong,o=t.updatePlaylist,i=t.getCurrent,r=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"logout",onClick:n.onDisconnect,children:"Disconnect"})})},s=function(n){o(n)};return Object(u.jsxs)("div",{className:"app-container",children:[Object(u.jsxs)("div",{className:"songs-container",children:[Object(u.jsx)(d,{onNewSong:function(n){var t=(new Date).getTime().toString();e.findIndex((function(t){return t.url===n}))>-1?console.log("found duplicate song , will not be added to the list"):c({url:n,id:t})}}),Object(u.jsx)(x,{playlist:e,onRemove:s})]}),Object(u.jsx)("div",{"data-testid":"player-container",className:"player-container",children:Object(u.jsx)(y,{song:i(),onSongEnded:s})}),Object(u.jsx)(r,{})]})},E=(e(106),{initialState:"disconnected",states:{disconnected:{CONNECT:"connecting"},connecting:{CONNECTION_SUCCESS:"connected",CONNECTION_ERROR:"error"},connected:{DISCONNECT:"disconnected"},error:{CONNECT:"connecting"}}}),S=function(n){return Object(u.jsx)("div",{className:"login-container  ",children:Object(u.jsxs)("div",{className:" overlay overlay-panel overlay-right",children:[Object(u.jsx)("h1",{children:"Welcome to Social Music Player!"}),Object(u.jsx)("p",{children:"Connect to stream and start your journey with us"}),n.loading?Object(u.jsx)("button",{className:"loading"}):Object(u.jsx)("button",{onClick:n.onConnect,className:"connect",children:"Connect"}),n.error?Object(u.jsx)("div",{className:"error-message",children:"Oops something went wrong, try again"}):""]})})},T=function(){var n=a(E),t=Object(s.a)(n,2),e=t[0],o=t[1],i=Object(c.useContext)(b),r=function(){o("CONNECT")};switch(Object(c.useEffect)((function(){"connecting"===e&&(i.disconnected&&i.open(),i.emit("login"));var n=function(){"disconnected"===e&&o("CONNECT")},t=function(n){"connecting"===e&&o("CONNECTION_ERROR")},c=function(){"connecting"===e&&setTimeout((function(n){o("CONNECTION_SUCCESS")}),3e3)};return i.on("connect",n),i.on("connect_error",t),i.on("disconnect",(function(){i.disconnect()})),i.on("ready",c),function(){i.off("connect",n),i.off("connect_error",t),i.off("disconnect",t),i.off("ready",c)}}),[e,o,i]),e){case"disconnected":return Object(u.jsx)(S,{onConnect:r});case"connecting":return Object(u.jsx)(S,{loading:"true",onConnect:r});case"connected":return Object(u.jsx)("div",{children:Object(u.jsx)(w,{onDisconnect:function(){o("DISCONNECT"),i.disconnect()}})});case"error":return Object(u.jsx)(S,{error:"error occurred during connecting ",onConnect:r});default:throw new Error("Don't know how to render state ".concat(e))}};var R=function(){return Object(u.jsx)(O,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(T,{})})})},D=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,108)).then((function(t){var e=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;e(n),c(n),o(n),i(n),r(n)}))};r.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root")),D()},48:function(n,t,e){},49:function(n,t,e){},50:function(n,t,e){},51:function(n,t,e){},83:function(n,t,e){}},[[107,1,2]]]);
//# sourceMappingURL=main.1f36ef47.chunk.js.map