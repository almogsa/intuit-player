(this["webpackJsonpintuit-demo"]=this["webpackJsonpintuit-demo"]||[]).push([[0],{105:function(t,n,e){},106:function(t,n,e){},107:function(t,n,e){"use strict";e.r(n);var c=e(1),o=e.n(c),i=e(40),r=e.n(i),s=(e(48),e(49),e(9)),a=function(t){return Object(c.useReducer)(function(t){return function(n,e){var c=t.states[n];if(void 0===c)throw new Error("No transitions defined for ".concat(n));var o=c[e];if(void 0===o)throw new Error("Unknown transition for event ".concat(e," in state ").concat(n));return o}}(t),t.initialState)},u=(e(50),e(51),e(0));var d=function(t){var n=Object(c.useState)(""),e=Object(s.a)(n,2),o=e[0],i=e[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),d=a[0],l=a[1];return Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(n){n.preventDefault(),!function(t){var n=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!t.match(n)&&t.match(n)[1]}(o)?l("please insert a valid youtube video url"):(t.onNewSong(o),i(""))},className:"add-song-container",children:[Object(u.jsx)("input",{"data-testid":"song-url",className:"add-song-input",type:"text",placeholder:"Enter video id",value:o,onChange:function(t){l(""),i(t.target.value)}}),Object(u.jsx)("div",{className:"spacer"}),Object(u.jsx)("button",{className:"add-song-button","data-testid":"add-song",type:"submit",children:"Add Song"})]}),d.length>0&&Object(u.jsx)("div",{className:"error",children:d})]})},l=e(43),j=e(41),f=e.n(j),b=o.a.createContext(),h=function(t){var n=t.children,e=f()("https://intuit-player.herokuapp.com/",{transports:["websocket","polling"],reconnection:!1,autoConnect:!1});return Object(u.jsx)(b.Provider,{value:e,children:n})},O="newSongEvent",v="historyPlaylistEvent",g="updatePlaylistEvent",m=function(){var t=Object(c.useState)([]),n=Object(s.a)(t,2),e=n[0],o=n[1],i=Object(c.useContext)(b);Object(c.useEffect)((function(){e.length||i.emit("getHistoryEvent");var t=function(t){o((function(n){return[].concat(Object(l.a)(n),[t])}))},n=function(t){o((function(){return t}))};return i.on(O,t),i.on(v,n),i.on(g,n),function(){i.off(O,t),i.off(v,n),i.off(g,n),i.disconnect()}}),[]);return{playlist:e,addSong:function(t){i.emit(O,t)},updatePlaylist:function(t){i.emit(g,t)},getCurrent:function(){return e[0]||""}}};e(83);function w(t){var n=t.song;return Object(u.jsxs)("div",{className:"song-container",children:[Object(u.jsx)("div",{"data-testid":"song-item",className:"song-item",children:n.url}),Object(u.jsx)("button",{className:"btn ",onClick:function(){t.onRemove(n)},children:"X"})]})}var p=function(t){var n=t.playlist,e=function(n){t.onRemove(n)},c=n.map((function(t,n){return Object(u.jsx)(w,{onRemove:e,song:t},n)}));return Object(u.jsx)("div",{"data-testid":"song-list",className:"song-list",children:c})},x=e(42),N=e.n(x);e(105);var C=function(t){var n=t.song;return Object(u.jsx)("div",{style:{height:"100%"},children:n.url?Object(u.jsx)(N.a,{url:n.url,width:"100%",height:"100%",controls:!1,playing:!0,muted:!1,onEnded:function(){t.onSongEnded(n)}}):Object(u.jsx)("div",{className:"empty-playlist",children:" Please add some songs to playlist"})})},y=function(t){var n=m(),e=n.playlist,c=n.addSong,o=n.updatePlaylist,i=n.getCurrent,r=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"logout",onClick:t.onDisconnect,children:"Disconnect"})})},s=function(t){return Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"logout",onClick:t.onLoad,children:"Load"})})},a=function(t){o(t)};function l(t,n){setTimeout((function(n){var e=(new Date).getTime().toString();c({url:t,id:e})}),n)}return Object(u.jsxs)("div",{className:"app-container",children:[Object(u.jsxs)("div",{className:"songs-container",children:[Object(u.jsx)(d,{onNewSong:function(t){var n=(new Date).getTime().toString();e.findIndex((function(n){return n.url===t}))>-1?console.log("found duplicate song , will not be added to the list"):c({url:t,id:n})}}),Object(u.jsx)(p,{playlist:e,onRemove:a})]}),Object(u.jsx)("div",{"data-testid":"player-container",className:"player-container",children:Object(u.jsx)(C,{song:i(),onSongEnded:a})}),Object(u.jsx)(s,{onLoad:function(){l("https://www.youtube.com/watch?v=sLPt028Iao8",50),l("https://www.youtube.com/watch?v=kiqEEr7CK2g",400),l("https://www.youtube.com/watch?v=AzfZ7hLR17s",450),l("https://www.youtube.com/watch?v=Qk2zGLMmp0s&t=3118s",500),l("https://www.youtube.com/watch?v=ZPCaPOnFoWM&t=105s",600),l("https://www.youtube.com/watch?v=VM9j5qgduMU&t=113s",600),l("https://www.youtube.com/watch?v=VM9j5qgduMU&t=141s",700),l("https://www.youtube.com/watch?v=s9RBAWEpdyI",800),l("https://www.youtube.com/watch?v=lr3tt3lTMMw",900)}}),Object(u.jsx)(r,{})]})},E=(e(106),{initialState:"disconnected",states:{disconnected:{CONNECT:"connecting"},connecting:{CONNECTION_SUCCESS:"connected",CONNECTION_ERROR:"error"},connected:{DISCONNECT:"disconnected"},error:{CONNECT:"connecting"}}}),S=function(t){return Object(u.jsx)("div",{className:"login-container  ",children:Object(u.jsxs)("div",{className:" overlay overlay-panel overlay-right",children:[Object(u.jsx)("h1",{children:"Welcome to Social Music Player!"}),Object(u.jsx)("p",{children:"Connect to stream and start your journey with us"}),t.loading?Object(u.jsx)("button",{className:"loading"}):Object(u.jsx)("button",{onClick:t.onConnect,className:"connect",children:"Connect"}),t.error?Object(u.jsx)("div",{className:"error-message",children:"Oops something went wrong, try again"}):""]})})},T=function(){var t=a(E),n=Object(s.a)(t,2),e=n[0],o=n[1],i=Object(c.useContext)(b),r=function(){o("CONNECT")};switch(Object(c.useEffect)((function(){"connecting"===e&&(i.disconnected&&i.open(),i.emit("login"));var t=function(){"disconnected"===e&&o("CONNECT")},n=function(t){"connecting"===e&&o("CONNECTION_ERROR")},c=function(){"connecting"===e&&setTimeout((function(t){o("CONNECTION_SUCCESS")}),3e3)};return i.on("connect",t),i.on("connect_error",n),i.on("disconnect",(function(){i.disconnect()})),i.on("ready",c),function(){i.off("connect",t),i.off("connect_error",n),i.off("disconnect",n),i.off("ready",c)}}),[e,o,i]),e){case"disconnected":return Object(u.jsx)(S,{onConnect:r});case"connecting":return Object(u.jsx)(S,{loading:"true",onConnect:r});case"connected":return Object(u.jsx)("div",{children:Object(u.jsx)(y,{onDisconnect:function(){o("DISCONNECT"),i.disconnect()}})});case"error":return Object(u.jsx)(S,{error:"error occurred during connecting ",onConnect:r});default:throw new Error("Don't know how to render state ".concat(e))}};var R=function(){return Object(u.jsx)(h,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(T,{})})})},k=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,108)).then((function(n){var e=n.getCLS,c=n.getFID,o=n.getFCP,i=n.getLCP,r=n.getTTFB;e(t),c(t),o(t),i(t),r(t)}))};r.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root")),k()},48:function(t,n,e){},49:function(t,n,e){},50:function(t,n,e){},51:function(t,n,e){},83:function(t,n,e){}},[[107,1,2]]]);
//# sourceMappingURL=main.f542d5c6.chunk.js.map